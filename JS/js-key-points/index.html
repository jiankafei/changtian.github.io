<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>JS要点解析 | Zr的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="前言对JS学习过程中的一些理解和总结">
<meta name="keywords" content="JS">
<meta property="og:type" content="article">
<meta property="og:title" content="JS要点解析">
<meta property="og:url" content="https://jiankafei.github.io/JS/js-key-points/index.html">
<meta property="og:site_name" content="Zr的博客">
<meta property="og:description" content="前言对JS学习过程中的一些理解和总结">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://jiankafei.github.io/image/JS_OOP.png">
<meta property="og:updated_time" content="2017-12-08T13:07:02.801Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS要点解析">
<meta name="twitter:description" content="前言对JS学习过程中的一些理解和总结">
<meta name="twitter:image" content="https://jiankafei.github.io/image/JS_OOP.png">
    

    
        <link rel="alternate" href="/atom.xml" title="Zr的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Zr的博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form" method="GET" action="https://www.baidu.com/s?">
    <input name="wd" type="text" class="search-form-input" placeholder="搜索" />
    <button type="submit" class="search-form-submit"></button>
</form>
<script>
(function ($) {
    $('.search-form').on('submit', function (e) {
        var keyword = $('.search-form-input[name="wd"]').val();
        window.location = 'https://www.baidu.com/s?wd=site:jiankafei.github.io ' + keyword;
        return false;
    });
})(jQuery);
</script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <form class="search-form" method="GET" action="https://www.baidu.com/s?">
    <input name="wd" type="text" class="search-form-input" placeholder="搜索" />
    <button type="submit" class="search-form-submit"></button>
</form>
<script>
(function ($) {
    $('.search-form').on('submit', function (e) {
        var keyword = $('.search-form-input[name="wd"]').val();
        window.location = 'https://www.baidu.com/s?wd=site:jiankafei.github.io ' + keyword;
        return false;
    });
})(jQuery);
</script>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Zr</h2>
            <h3 id="title">Web Developer &amp; Designer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>XianYang, China</span>
            <a id="follow" target="_blank" href="https://github.com/jiankafei">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                4
                <span>文章</span>
            </div>
            <div class="article-info-block">
                4
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/jiankafei" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-JS要点解析" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            JS要点解析
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/JS/js-key-points/">
            <time datetime="2017-12-04T09:17:19.000Z" itemprop="datePublished">2017-12-04</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/JS/">JS</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JS/">JS</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对JS学习过程中的一些理解和总结</p>
<a id="more"></a>
<p>从我工作到 2017/10 辞职，总共两年时间，期间一直想写个总结JS的文章，却一直没下决心动手，这次，借着辞职学习的时间，把这件事办了。也算是给自己一个交代。</p>
<p>对于前端开发来说，JS的确是一门很有魔力的语言。它不需要静态类型语言对变量类型的严格要求，也不需要编译型语言需要编译才能真正执行（期间，学习了Go语言，真的很喜欢Go语言，也终于让我有理由学习后端开发了。虽然Node也可以，但使用JS写Node服务，真的不太舒服，后端还是需要静态类型语言来做才最合适），这让它在Web前端风生水起（我看过Dart的语法，出自Google，如Go般简洁，前端后端都有支持，很希望Dart能替代JS，但是看现在的情况是不可能了）。</p>
<p>C语言等类C的静态编译型语言里面，程序要想执行，都会有一个入口函数main。但JS在html里面通过script的方式加载，script分割代码的分割问题，以及JS加载都是通过script为单位进行编译（JS的编译好像只有词法分析和语法分析）和执行的问题，致使js在标准上写不了main入口函数，所以JS提供了全局作用域这么个东西。相当于JS线程自己就有个main函数在跑一样。</p>
<p>说到函数执行，这里就有几点需要提了。</p>
<p>JS函数传参调用的方式：<br>传名调用 or 传值调用：<br>JS是传值调用的，对于初学JS的小白来说，这让他们很矛盾。因为他们知道JS有基本类型，有引用类型。引用类型当作参数传入函数调用，如果按传值调用，引用类型传入的又是什么呢？传入的是引用类型的指针，又称内存地址，在JS里统一叫引用，也就是说JS不会把引用类型传过去（真传过去了，就是另一个对象了），而是把地址当作值传过去。</p>
<p>这里要说的一点是，JS函数传参后，arguments 和形参的关系：<br>如果函数调用时，相应的位置传入了实参，那么 arguments 和形参是互相影响的，也就是说，修改了一个，另一个也会相应的更改，并且是严格相等的。如果相应位置没有传入实参，则他们 arguments 和形参之间是互相独立的。至少在chrome上测试是这样的。</p>
<p>JS在执行之前，也就是词法分析和语法分析之后，还有一个预解析，预解析做的事就是先提升var声明的变量，初始值为undefined，再提升function声明的函数（直接提升整个函数体）。其实可以这么理解，var和function提升的是变量的创建和初始化，只不过var的变量的初始值为undefined。let const class 等提升的是创建，但并没有提升初始化，而变量只有在初始化之后才可以使用，可以解释了let const 形成的暂时性死区，而且const 没有赋值操作。</p>
<p>该轮到函数执行了。在JS主线程的函数执行会形成一个执行栈，函数里定义的变量就都在栈内存里存放着，基本类型保存的就是真实的基本类型的值，引用类型保存的就是引用类型的地址，而引用类型们都在堆内存里存放着。栈内存里变量的存放是有次序和有固定大小的，这也是为什么基本类型string boolean number 的值是不可更改的原因，如果有新值都是另外开辟新的内存来存放新值，至于引擎对基本类型的优化，应该就挺底层的了，我们也不要太过关注。堆内存里对象的存放都是没有结构次序，任意存放的，大小不固定的，所以可以修改对象的属性。</p>
<p>函数的执行链是个后入先出的过程，函数执行完毕后，它的执行栈会被弹出，也就是销毁，栈都没了，里面存放的变量自然就释放了。而堆内存里的引用类型们可不会因为函数执行完毕而销毁，它们会等待GC来回收他们。</p>
<p>GC回收引用类型，我知道的有两种方式，为了少些文字，我把引用类型在之后都叫做对象：</p>
<ol>
<li>引用计数：会标记变量或属性对对象的引用个数，如果引用个数为0，就是说它不在被使用，那将会在下一次垃圾回收中回收。但引用计数有循环引用的问题，导致对象无法被回收，A和B互相引用，但它们都没有被其他变量所引用，理应回收他们，计数方式就不能解决这个问题。</li>
</ol>
<p>代表有，IE8-的浏览器，这个比较特殊，IE8-的JS引擎用的是标记清除，但IE8-浏览器提供的DOM和BOMd对象是使用C++以COM对象的形式实现的，而COM对象的垃圾回收机制使用的是引用计数，导致如果循环引用中存在COM对象，就会出现上述问题，IE9把COM对象变成了真正的JS对象，这个问题才得以解决。（出自JavaScript高级程序设计）</p>
<ol>
<li>标记清除：现代的浏览器大都使用这种方式回收垃圾。它的策略是这样的：</li>
</ol>
<p>标记阶段，从全局变量对象（根对象）向下遍历，对能从根对象访问到的对象，都添加标记，这些对象称为可达对象。</p>
<p>清除阶段，遍历堆内存，如果某个对象是可达对象，则清除标记，为下一次标记做准备，不可达对象直接回收内存。具体可以看这篇<a href="http://www.jianshu.com/p/b0f5d21fe031" target="_blank" rel="noopener">文章</a></p>
<p>接下来说下函数执行形成的作用域链：<br>JS的全局作用域会生成一个全局变量对象，用来保存全局作用域内的变量，该对象很显然只会在页面关闭的时候才会销毁，因为这些变量会在之后的程序执行中被用到。</p>
<p>函数的定义：<br>引擎为函数添加 [[scopechain]] 属性，该属性为它当前所处位置的作用域链。如果获得这个链条，后面会说。</p>
<p>JS函数在执行的时候，会创建一个 {excution context} 执行环境对象，就是该对象决定了函数调用时候的this值(call, apply, bind 会改变this)。在创建该对象的时候，还会做以下几件事：</p>
<ol>
<li>为函数添加 [[scope]] 属性，值为 scopechain</li>
<li>创建执行时的活动对象 {activation object} ，活动对象里有 arguments this 命名参数 变量对象。</li>
<li>把 {activation object} 添加到 [[scope]] 属性的顶部，也就是第一个。</li>
<li>当执行完毕，释放[[scope]]，回收 {excution context]} {activation object}</li>
</ol>
<p>可以看出，函数在执行的时候，都有自己的作用域链属性。而且作用域链就是个活动对象数组（具体什么结构，我也不知道，也许是集合呢）。但函数定义在什么地方是写死的，所以函数的 scopechain 永远是不会变的。这就是为什么叫做词法作用域。</p>
<p>这里做两个作用域链的示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">			d();</span><br><span class="line">		&#125;;</span><br><span class="line">		c();</span><br><span class="line">	&#125;;</span><br><span class="line">	b();</span><br><span class="line">&#125;;</span><br><span class="line">a();</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义 a.scopeChain = [window]</span></span><br><span class="line"><span class="comment">//执行 a.scope = [a, ...a.scopeChain]</span></span><br><span class="line"><span class="comment">//定义 b.scopeChain = a.scope</span></span><br><span class="line"><span class="comment">//执行 b.scope = [b, ...b.scopeChain]</span></span><br><span class="line"><span class="comment">//定义 c.scopeChain = b.scope</span></span><br><span class="line"><span class="comment">//执行 c.scope = [c, ...c.scopeChain]</span></span><br><span class="line"><span class="comment">//定义 d.scopeChain = c.scope</span></span><br><span class="line"><span class="comment">//执行 d.scope = [d, ...d.scopeChain]</span></span><br><span class="line"></span><br><span class="line">第二种：</span><br><span class="line">a()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	b()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	c()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义 a.scopeChain = [window]</span></span><br><span class="line"><span class="comment">//定义 b.scopeChain = [window]</span></span><br><span class="line"><span class="comment">//定义 c.scopeChain = [window]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//执行 a.scope = [a, ...a.scopeChain];</span></span><br><span class="line"><span class="comment">//执行 b.scope = [b, ...b.scopeChain];</span></span><br><span class="line"><span class="comment">//执行 c.scope = [c, ...c.scopeChain];</span></span><br></pre></td></tr></table></figure>
<p>等号右侧：</p>
<ol>
<li>window 指代得到是全局变量对象</li>
<li>a, b, c, d 指的是函数各自在执行时生成的活动对象</li>
</ol>
<p>到了该说闭包的时候了，成气候了<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> qq = <span class="number">11</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(qq);</span><br><span class="line">	&#125;;</span><br><span class="line">	b();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> qq = <span class="number">11</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(qq);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = a();</span><br></pre></td></tr></table></figure></p>
<p>闭包我这里想说个自己定义的概念，广义闭包，狭义闭包（爱因斯坦会不会打我）。</p>
<p>广义闭包就是函数内部没有使用外部作用域的变量的函数，或者使用了外部变量，但函数只在作用域内部使用的函数。</p>
<p>狭义闭包相反，狭义闭包就是我们常被问到必挂在嘴边的闭包。</p>
<p>第一种闭包是广义闭包，由于还是在父作用域体内，等a函数执行完毕，闭包离开执行环境，就会被回收；</p>
<p>第二种就是比较典型的狭义闭包，a内部的匿名函数形成闭包，并传递给b变量，如果a函数是在全局作用域，在不关闭页面的情况下只有把b赋值为null，解除引用，闭包才会被回收。如果a函数是在另一个函数体内，那么等这个父函数执行完毕，b离开执行环境，标记清除就会回收b引用的闭包。现代浏览器都比较智能，这一点基本可以放心，如果不放心，那就手动赋值为null吧。</p>
<p>上面说了闭包的产生和销毁，现在就来说说，我们整天念叨的闭包到底指的是什么。它又是和什么有关系的。</p>
<p>在之前我们已经说了函数定义和调用阶段所做的事。闭包就是和他们有关系。不管是函数定义上的 scopechain 还是执行时的 scope，它们都引用了祖辈函数执行的活动对象。广义闭包由于定义的函数在其父函数执行完毕后，就销毁了，所以不会一直保留对所有祖辈活动对象的引用。而狭义闭包，按理说函数执行完毕，内部定义的所有变量和函数都是要别回收的，但问题是如果把一个函数当成返回值返回了，返回之后还赋给一个变量，相当于这个函数在它的父函数执行完毕后理应销毁的情况下，并没有销毁，那么该函数身上的 scopechain 引用的活动对象也就不会释放，这就是闭包的根源，在外部引用了内部的函数，导致理应销毁的活动对象没有被销毁。</p>
<p>闭包说完了，该说说我们在前面提到的 {excution context} 执行环境对象，也叫执行上下文对象。这个对象是谁呢？有一个技巧，就是函数是以谁的方法的身份执行的，那么这个对象就是谁，this就是谁。this的确定就这么简单。在严格模式下，由于var function 声明的变量和函数默认不再挂载到window上。所以函数的直接执行，并没有作为任何对象的方法的身份来执行，所以this为undefined也是说的通的。</p>
<p>函数重载的概念其实不是JS的。JS在理论上或者语法上没有这个概念。这个概念一般存在于传统的静态类型语言里。由于静态类型语言在定义函数时，函数的形参的类型都是需要确定的，所以如果同一个函数在调用的时候，如果有传入不同类型或者个数的参数都能处理的需求，那就需要函数重载，重载根据传入的参数的类型和数量的不同实现签名，特定的传参调用会调用特定的签名函数。反观JS，JS的函数也是对象，同一函数名在同一作用域下只能有一个，后面的会覆盖前面的，同一变量不可能指向多个地址。所以重载不可能，但JS也有办法处理这种需求，那就是函数的 arguments 对象 和 最新的 rest 参数。拿arguments来说，它是一个集合，里面包含了所有传入的参数，我们可以通过判断 arguments.length 和 arguments 中的每一项的类型来做不同的操作，同样也实现了这种需求。</p>
<p>下面来说说对象：</p>
<p>首先要说的就是对象的引用。JS对于引用类型的处理非常高名，而这一处理方式也带来了很多其他的概念名词：浅拷贝，变量是否改变。</p>
<p>刚学JS时我很在意浅拷贝这个概念，但没过多久，我就觉得这对JS来说就是个伪概念，而且现在还非常盛行。js所有的引用类型都是在堆内存里面，他们都是独立的，并不是我们表面上看到的，一个嵌套一个，他们的属性存放的都是值，如果本身的值为引用类型，那么这个值就是引用类型的地址。所以可以认为，在存储机制方面，js对象都是扁平化的。我自己想了这么个词，不同意的可以提issue交流。</p>
<p>对象里最重要的当属原型和原型链了。原型是什么，原型就是个普通对象。原型链是什么，原型链用于属性查找（函数的作用域链用于变量查找），自身没有的属性沿着原型链一直往上找，直至找到。所以，最重要的其实是原型链。最需要了解的就是JS的面向对象编程了，因为它能很好的让人们了解原型及原型链。</p>
<p>JS使用原型链来实现面向对象编程。JS使用构造函数来构造对象，好多人喜欢把构造函数叫做类，构造函数就是个普通的函数。</p>
<p>为了节约书写时间，我这里直接使用类来表示构造函数（大家都懂的，JS没有类）。在讨论类之前，我先说说和函数有关的一个东西，使用函数来说比较好。JS里任何函数的定义，都会创建一个函数的伴生对象（我自己起的名），这个伴生对象就是构造新对象时的原型。这个图能很好的说明它们之间的关系:</p>
<p><img src="/image/JS_OOP.png" alt="JS面向对象"></p>
<p>图片说明：图片中new括起来的区域，是我自己想的过程，和真实的new的结果一样，这里只是为了做个说明，但不代表JS真实的new操作。</p>
<p>对象的方法都是函数，由于函数的复用性，所以没有必要都拥有各自的方法，但是属性是用来表示对象自身的状态的，所以各自的属性应该是独立的（不说例外情况）</p>
<p>基于以上，构造对象的包括工厂函数模式，构造函数模式，原型模式这里就不说了，大家都知道构造加原型模式，所以这里也不说了，都快嚼烂了。</p>
<p>至于好多人都说对于 protptype constructor <strong>proto</strong> 等概念混淆了，容易懵逼，这个我会在后面捋一遍。</p>
<p>先把继承讲了：</p>
<p>属性继承：</p>
<p>把父类拿到子类里执行，通过call apply bind，只要能改变父类this为子类this的方式都行，比如添加属性执行，在删除属性。这样的话。相当于把父类里定义的属性添加到子类里面了。没了！没什么难度！</p>
<p>方法继承：</p>
<p>方法继承说白了，就是个属性查找的事，之前我们说过，属性查找基于原型链。所以我们只要使用原型链把这些对象连接起来，就万事大吉。不过这里只有一个忠告，就是不要让任何环节中的两个我们操作的对象是一个对象。因为原则就是一个对象修改自己的属性不应该影响到其他对象的属性。只要满足上述的要求，想怎么继承就怎么继承。</p>
<p>这里列举几个典型的继承方式，都是平常会接触到的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">// 组合继承</span></span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent()</span><br><span class="line"><span class="comment">// 道格拉斯继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">T</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">T.prototype = Parent.prototype;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> T();</span><br><span class="line"><span class="comment">// 本质和道格拉斯继承一样</span></span><br><span class="line">Child.protptype = <span class="built_in">Object</span>.create(Parent.prototype);</span><br><span class="line"><span class="comment">// 非标准API实现继承，尽量不要使用</span></span><br><span class="line">Child.prototype.__proto__ = Parent.prototype;</span><br><span class="line"><span class="comment">// 本质和 __proto__ 方式一样</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(Child.prototype, Parent.prototype)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他自定义</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, Parent.prototype);</span><br><span class="line">Child.prototype = obj;</span><br><span class="line"><span class="comment">// 还是那句话，只要通过对象的原型属性把原型链连接好，想怎样继承都行。</span></span><br></pre></td></tr></table></figure>
<p>注意点：</p>
<p>上述所谓的组合继承 是有缺陷的继承，因为如果Parent类需要传入参数，那我们就需要在继承的时候传入相应的参数，如果内部不做兼容处理，就会报错。但问题是，这样的继承就没有普遍性了，我们不可能每次都能传入合适的参数。所以国外的一个小伙，名叫道格拉斯，使用了一个中间类来避开这个问题，能避开的本质是，Parent 类只有在实例化的时候才会有这个问题，但中间类T不需要传参，T的实例化没有问题，也就解决问题了。</p>
<p>所以得出一个结论，在做继承时，满足以上我所说的要求的情况下，尽量不要使用父类的实例来做中间对象实现继承。只要避开这个，怎么样继承都行。</p>
<p>对于有些人觉的以下方式也没问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Child.prototype = Parent.prototype;</span><br></pre></td></tr></table></figure>
<p>这种方式一看就是和我上面说的有冲突，什么冲突？不要让任何环节中的两个我们操作的对象是一个对象。因为如果你改Child.prototype上的属性，就相当于修改Parent.prototype上的属性。所以严格禁止。</p>
<p>有人会说了，上面的道格拉斯继承，也是两个对象是同一个对象。说的好，但问题是，道格拉斯继承的中间类T的prototype不是我们要直接操作的对象，所以无所谓。</p>
<p>注：这里的直接操作说的是业务需求上的操作。如果有人作死，偏要拿到这些原型对象做各种修改，那就让他作死吧。</p>
<p>至于ES6的class，这里就不说了，它就是个语法糖，改变了一下语法书写，对内部的一些属性做了些更严格的限制外，和ES5一样。</p>
<p>JS里最重要的函数和对象说完了，似乎也没什么了，其他的都是些API，只要查文档就行。我一直秉承的一个原则就是，能查API文档解决的事情就不是事。了解API体现不了一个人的实力。</p>
<p>JS严格模式是一种向未来兼容的方式。也都是需要记住的一些规则，但都很合理。这里我也不贴出来了，用的多了，自然就有印象了，MDN，百度，网上一大堆。</p>
<p>开发者自己在使用严格模式的时候，不要把 ‘use strict’ 使用在全局，只使用在自己的代码最外层函数里，因为你的代码不应该影响别人的代码，而且如果别人没使用严格模式，全局模式使用就可能会报错。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/web/full-link-optimization/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">Web全链路优化</div>
        </a>
    
</nav>


    
</article>


    
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/JS/js-key-points/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JS/">JS</a></p>
                            <p class="item-title"><a href="/JS/js-key-points/" class="title">JS要点解析</a></p>
                            <p class="item-date"><time datetime="2017-12-04T09:17:19.000Z" itemprop="datePublished">2017-12-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/web/full-link-optimization/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/web/">web</a></p>
                            <p class="item-title"><a href="/web/full-link-optimization/" class="title">Web全链路优化</a></p>
                            <p class="item-date"><time datetime="2017-11-21T03:52:15.000Z" itemprop="datePublished">2017-11-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/css/flex-layout/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/css/">css</a></p>
                            <p class="item-title"><a href="/css/flex-layout/" class="title">flex布局解析</a></p>
                            <p class="item-date"><time datetime="2016-08-12T00:15:29.000Z" itemprop="datePublished">2016-08-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/js/flexible/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/js/">js</a></p>
                            <p class="item-title"><a href="/js/flexible/" class="title">移动端web高清屏显示及伸缩布局方案(原创)</a></p>
                            <p class="item-date"><time datetime="2016-08-11T02:41:29.000Z" itemprop="datePublished">2016-08-11</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/web/" style="font-size: 10px;">web</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 王勒<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>